<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="main.css" />
</head>
<body>
    <div class="nav" id="nav-panel">
        <div class="nav-buttons-top">
            <div class="nav-button screenshot-btn" onclick="captureScreenshot()" title="Capture Screenshot">
                <img src="assets/capture.png" class="nav-icon">
            </div>
            <div class="nav-button screenshot-btn" onclick="openScreenshotFolder()" title="Open Screenshot Folder">
                <img src="assets/folder.png" class="nav-icon">
            </div>
            <div class="nav-button screenshot-btn" onclick="openSettingsPopup()" title="Settings">
                <img src="assets/settings.png" class="nav-icon">
            </div>
        </div>
        <!-- Switch World removed for RN04 build -->
        <div class="nav-button special-link" onclick="openNotes()">
            <img src="assets/notes.png" class="nav-icon" onerror="this.style.display='none'">
            <span>Notes</span>
        </div>
        <div class="nav-button link" data-url='https://2004.losthq.rs/?p=questguides' data-title="Quest Guides" onclick="addTab('https://2004.losthq.rs/?p=questguides', 'Quest Guides', 'assets/quests.png')">
            <img src="assets/quests.png" class="nav-icon">
            <span>Quest Guides</span><span class="open-external" onclick="event.stopPropagation(); openExternal(this.parentElement.getAttribute('data-url'), this.parentElement.getAttribute('data-title'))"><img src="assets/external-link.svg" alt="" class="icon" /></span>
        </div>
        <div class="nav-button link" data-url='https://2004.losthq.rs/?p=skillguides' data-title="Skill Guides" onclick="addTab('https://2004.losthq.rs/?p=skillguides', 'Skill Guides', 'assets/skillsguides.png')">
            <img src="assets/skillsguides.png" class="nav-icon">
            <span>Skill Guides</span><span class="open-external" onclick="event.stopPropagation(); openExternal(this.parentElement.getAttribute('data-url'), this.parentElement.getAttribute('data-title'))"><img src="assets/external-link.svg" alt="" class="icon" /></span>
        </div>
        <div class="nav-button link" data-url='https://markets.rn04.rs' data-title="Market" onclick="addTab('https://markets.rn04.rs', 'Market', 'assets/market.png')">
            <img src="assets/market.png" class="nav-icon">
            <span>Market</span><span class="open-external" onclick="event.stopPropagation(); openExternal(this.parentElement.getAttribute('data-url'), this.parentElement.getAttribute('data-title'))"><img src="assets/external-link.svg" alt="" class="icon" /></span>
        </div>
        <div class="nav-button link" data-url='https://2004.lostcity.rs/worldmap' data-title="World Map" onclick="addTab('https://2004.lostcity.rs/worldmap', 'World Map', 'assets/worldmap.png')">
            <img src="assets/worldmap.png" class="nav-icon">
            <span>World Map</span><span class="open-external" onclick="event.stopPropagation(); openExternal(this.parentElement.getAttribute('data-url'), this.parentElement.getAttribute('data-title'))"><img src="assets/external-link.svg" alt="" class="icon" /></span>
        </div>
    </div>
    <script>
        const { ipcRenderer } = require('electron');
        function addTab(url, title, iconPath) { ipcRenderer.send('add-tab', url, title, iconPath); }
        function openNav(view) { ipcRenderer.send('switch-nav-view', view); }
        // chat removed for RN04 build
        function openExternal(url, title) { ipcRenderer.send('open-external', url, title); }
        function openNotes() { ipcRenderer.invoke('open-notes'); }

        // Screenshot functions
        function captureScreenshot() {
            ipcRenderer.send('capture-screenshot');
        }

        function openScreenshotFolder() {
            ipcRenderer.send('open-screenshot-folder');
        }

        function openSettingsPopup() {
            ipcRenderer.send('open-settings-popup');
        }

        function toggleNavPanel() {
            ipcRenderer.send('toggle-nav-panel');
        }
        ipcRenderer.on('nav-panel-collapsed', (event, collapsed) => {
            const icon = document.getElementById('nav-toggle-icon');
            if (icon) icon.textContent = collapsed ? '⮜' : '⮞';
        });
    </script>
</body>
</html>